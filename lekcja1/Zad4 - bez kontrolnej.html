<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <header>PESEL</header>

    <script>
        function start() {
            function przerwa() { document.write("<br><br>") }
            let pesel = prompt("Podaj swój pesel", "05271601994")

            //check if wszystko intem
            for (i = 0; i < pesel.length; i++) {
                if (pesel[i] < "0" || pesel[i] > "9") {
                    alert("Niedozwolone znaki")
                    return false
                }
            }
            //check długość 
            if (pesel.length != 11) {
                alert("Zła długość Peselu!!!!")
                return false
            }
            przerwa()

            //check rok
            let year = pesel[0] + pesel[1]
            let yearString = year.toString()
            if (year < 10 && yearString[0] != "0") {
                yearString = "0" + year
            }

            //check miesiąc 
            let tempMonth = pesel[2] + pesel[3]
            let century = 0
            let month = 0
            if (pesel[2] == 0 && tempMonth <= 12) { //sprawdzenie 3 cyfry, oraz czy jest miesiącem
                month = a // 2 ostatnie cyfry
                century = 19 //stulecie
            }
            else if (pesel[2] == 2 && tempMonth - 20 <= 12) {
                month = tempMonth - 20
                century = 20
            }
            else if (pesel[2] == 4 && tempMonth - 40 <= 12) {
                month = tempMonth - 40
                century = 21
            }
            else if (pesel[2] == 6 && tempMonth - 60 <= 12) {
                month = tempMonth - 60
                century = 22
            }
            else if (pesel[2] == 8 && tempMonth - 80 <= 12) {
                month = tempMonth - 80
                century = 18
            }
            else {
                alert("Błędny pesel - złe stulecie lub nieistniejący miesiąc(idk)")
                return false
            }

            let monthString = month.toString()
            if (month < 10 && monthString[0] != "0") {
                monthString = "0" + month
            }


            //check dzień
            let day = Number(pesel[4] + pesel[5]);
            month = Number(month)
            year = Number(year)
            if (month == 2) {
                if (year % 4 == 0 && day <= 29); //rok przestępczy
                else if (year % 4 != 0 && day <= 28); //rok nieprzestępczy
                else {
                    alert("Błędny dzień!"); //alert
                    return false
                }
            }
            else if ([1, 3, 5, 7, 8, 10, 12].includes(month) && day <= 31); //miesiące z 31 dni
            else if ([4, 6, 9, 11].includes(month) && day <= 30); //miesiące z 30 dni
            else {
                alert("Błędny dzień!"); //alert
                return false
            }

            let dayString = day.toString()
            if (day < 10 && dayString[0] != "0") {
                dayString = "0" + day
            }

            //check płeć
            if (pesel[9] % 2 == 0) {
                document.write("Jesteś Kobietą")
            }
            else document.write("Jesteś Mężczyzną")
            przerwa()

            console.log(day, month, year, century)


            //--------WYPISANIE WSZYSTKIEGO----------
            document.write(yearString + " - to są ostatnie liczby roku")
            przerwa()
            //wypisanie roku
            document.write(century + yearString + " - to jest rok")
            przerwa()
            //wypisanie miesiąca
            document.write(monthString + " - to jest miesiąc")
            przerwa()
            //dzień
            document.write(dayString + " - to jest dzień")
            przerwa()
            //pełna data urodzenia
            document.write("Twoja data urodzenia to " + dayString + "." + monthString + "." + century + yearString)
            przerwa()

            return true
        }


        let returnCode = start()
        if (!returnCode) document.write("Odśwież stronę")

        
    </script>
</body>

</html>